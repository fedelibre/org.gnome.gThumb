app-id: org.gnome.gThumb
runtime: org.gnome.Platform
runtime-version: '40'
sdk: org.gnome.Sdk

command: gthumb

finish-args:
  - --socket=fallback-x11
  - --socket=wayland
  - --device=dri
  - --share=ipc
  - --talk-name=org.freedesktop.secrets
  - --filesystem=xdg-public-share
  - --filesystem=xdg-pictures


modules:
  - name: exiv2
    buildsystem: cmake-ninja
    cleanup:
        - /lib/exiv2
    config-opts:
        - -DCMAKE_BUILD_TYPE=Release
        - -DEXIV2_BUILD_EXIV2_COMMAND=OFF
        - -DEXIV2_BUILD_SAMPLES=OFF
    sources:
        - type: archive
          url: https://exiv2.org/builds/exiv2-0.27.4-Source.tar.gz
          sha256: 84366dba7c162af9a7603bcd6c16f40fe0e9af294ba2fd2f66ffffb9fbec904e
    
  - name: gThumb
    buildsystem: meson
    #config-opts:
    #    - -Db_sanitize=address
    sources:
        - type: archive
          url: https://gitlab.gnome.org/GNOME/gthumb/-/archive/3.10.4/gthumb-3.10.4.tar.gz
          sha256: 5fc5f4f2e72cf063b3680b35204c409d4faf16130c26d6af06ab267c474ed7a1
        - type: patch
          path: gthumb-Add-3.10.4-release.patch

